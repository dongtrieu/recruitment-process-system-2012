<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">
    <p:dialog id="messages"
              header="Change Password Dialog"
              widgetVar="dlg_password"
              modal="true"
              resizable="false" >
        <h3>Change your password</h3>
        <p>
            <strong>Attention</strong> by Admin<br />
		In the first time using the system, you should be changed default password to protect your account.
        </p>
        <h:form id="frm-password">
            <h4>New Password</h4>
            <fieldset>
                <p:password id="txtPassword" value="#{accountMB.password}"
                            styleClass="text-input" feedback="true"
                            required="true"
                            requiredMessage="Password is required"
                            validatorMessage="Password must have at least 6 characters">
                    <f:validateLength minimum="6" />
                </p:password>
                <h:message styleClass="input-notification error png_bg" for="txtPassword" id="messageForPassword"/>

            </fieldset>
            <h4>Confirm Password</h4>
            <fieldset>
                <p:password id="confirmPassword" value="#{accountMB.confirm}"
                            styleClass="text-input" feedback="true"
                            match="txtPassword"
                            />
                <h:message styleClass="input-notification error png_bg" for="confirmPassword" id="messageForConfirmPassword"/>
            </fieldset>
            <br/>
            <fieldset>
                <h:commandButton value="Save Changes" styleClass="button" action="#{accountMB.changePass}"/>
            </fieldset>
        </h:form>
        <p:ajax event="close" update="growl" listener="#{accountMB.handleClose}"/>
    </p:dialog><!-- End #messages -->

    <script type="text/javascript" >
        $(document).ready(function () {
          var param = '#{sessionScope.accountMB.account.isChangedPassword}';
          if(param == "false")
            dlg_password.show();
        });
    </script>
</ui:composition>

